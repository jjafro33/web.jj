<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spotify Clone Advanced</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Roboto',sans-serif;background:#121212;color:#fff;height:100vh;display:flex;overflow:hidden;}
a{text-decoration:none;color:#b3b3b3;transition:.2s;}
a:hover{color:#fff;}

/* Sidebar */
.sidebar{width:250px;background:#000;display:flex;flex-direction:column;padding:20px;flex-shrink:0;}
.logo{color:#1DB954;font-size:24px;font-weight:bold;margin-bottom:25px;display:flex;align-items:center;gap:10px;}
.nav-links a{display:flex;align-items:center;gap:12px;font-size:15px;margin:12px 0;cursor:pointer;transition:.2s;}
.nav-links a.active,a:hover{color:#1DB954;}
.library{margin-top:30px;}
.library h3{font-size:13px;color:#b3b3b3;text-transform:uppercase;margin-bottom:10px;}
.playlist-box{background:#181818;border-radius:8px;padding:14px;margin-bottom:10px;font-size:13px;cursor:pointer;transition:.3s;}
.playlist-box:hover{background:#282828;}

/* Main */
.main{flex:1;display:flex;flex-direction:column;overflow:hidden;}
.header{padding:15px 25px;background:#181818;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:10;transition:background .3s;}
.search-bar{background:#282828;border:none;padding:8px 15px;border-radius:20px;color:#fff;width:260px;transition:.2s;}
.search-bar:focus{outline:none;box-shadow:0 0 0 2px #1DB954;}
.profile{display:flex;align-items:center;gap:12px;cursor:pointer;}
.profile img{width:32px;height:32px;border-radius:50%;}

/* Sections */
.section{flex:1;overflow-y:auto;padding:20px;transition:opacity .4s;}
.section.hidden{opacity:0;pointer-events:none;position:absolute;top:0;left:0;width:100%;height:100%;}
.section h2{font-size:20px;margin-bottom:15px;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:20px;}
.card{background:#181818;padding:15px;border-radius:8px;cursor:pointer;transition:.3s;display:flex;flex-direction:column;animation:fadeIn .5s ease forwards;opacity:0;}
.card:hover{background:#282828;transform:scale(1.05);}
.card img{width:100%;border-radius:6px;margin-bottom:12px;object-fit:cover;transition:transform .3s;}
.card img:hover{transform:scale(1.05);}
.card-title{font-size:15px;font-weight:bold;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.card-artist{font-size:13px;color:#b3b3b3;}
@keyframes fadeIn{0%{opacity:0;transform:translateY(10px);}100%{opacity:1;transform:translateY(0);}}

/* Player */
.player{height:100px;background:#181818;border-top:1px solid #282828;display:flex;align-items:center;justify-content:space-between;padding:0 20px;transition:all .3s;}
.now-playing{display:flex;align-items:center;gap:12px;flex:1;transition:all .3s;}
.now-playing img{width:60px;height:60px;border-radius:6px;object-fit:cover;transition:transform .3s;}
.now-playing img.playing{animation:rotateCover 6s linear infinite;}
@keyframes rotateCover{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
.now-playing-info{display:flex;flex-direction:column;}
.now-title{font-size:14px;font-weight:bold;}
.now-artist{font-size:12px;color:#b3b3b3;}

.controls{flex:2;display:flex;flex-direction:column;align-items:center;}
.buttons{display:flex;gap:18px;align-items:center;margin-bottom:6px;}
.buttons button{background:none;border:none;color:#fff;font-size:20px;cursor:pointer;transition:.2s;}
.buttons button:hover{color:#1DB954;transform:scale(1.2);}
.progress-container{display:flex;align-items:center;gap:10px;width:100%;max-width:500px;}
.time{font-size:11px;color:#b3b3b3;}
.progress{flex:1;height:4px;background:#404040;border-radius:2px;cursor:pointer;}
.progress-filled{height:100%;width:0%;background:#1DB954;border-radius:2px;}

.volume{flex:1;display:flex;justify-content:flex-end;align-items:center;gap:10px;}
.volume input{width:100px;}
</style>
</head>
<body>
<div class="sidebar">
  <div class="logo"><i class="jmh.jpg"></i> Spotify</div>
  <div class="nav-links">
    <a id="homeTab" class="active"><i class="fa-solid fa-house"></i> Home</a>
    <a id="searchTab"><i class="fa-solid fa-magnifying-glass"></i> Search</a>
    <a id="libraryTab"><i class="fa-solid fa-book"></i> Your Library</a>
  </div>
  <div class="library">
    <h3>Playlists</h3>
    <div class="playlist-box">+ Create Playlist</div>
    <div class="playlist-box">❤️ Liked Songs</div>
  </div>
</div>

<div class="main">
  <div class="header">
    <input type="text" id="searchInput" class="search-bar" placeholder="Search for songs, artists...">
    <div class="profile">
      <img src="https://i.pravatar.cc/40" alt="profile"><span>Guest</span>
    </div>
  </div>

  <div id="homeSection" class="section">
    <h2>Trending Now</h2>
    <div class="grid" id="songs"></div>
    <h2>Recently Played</h2>
    <div class="grid" id="recentlyPlayed"></div>
    <h2>Recommended For You</h2>
    <div class="grid" id="recommended"></div>
  </div>

  <div id="searchSection" class="section hidden">
    <h2>Search Results</h2>
    <div class="grid" id="searchResults"></div>
  </div>

  <div id="librarySection" class="section hidden">
    <h2>Your Library</h2>
    <div class="grid" id="libraryContent"></div>
  </div>

  <div class="player">
    <div class="now-playing">
      <img id="nowCover" src="" alt="cover">
      <div class="now-playing-info">
        <div class="now-title" id="nowTitle">No song</div>
        <div class="now-artist" id="nowArtist">-</div>
      </div>
    </div>
    <div class="controls">
      <div class="buttons">
        <button onclick="toggleShuffle()"><i class="fa-solid fa-shuffle"></i></button>
        <button onclick="prevSong()"><i class="fa-solid fa-backward-step"></i></button>
        <button onclick="togglePlay()" id="playBtn"><i class="fa-solid fa-play"></i></button>
        <button onclick="nextSong()"><i class="fa-solid fa-forward-step"></i></button>
        <button onclick="toggleRepeat()"><i class="fa-solid fa-repeat"></i></button>
      </div>
      <div class="progress-container" onclick="seek(event)">
        <span class="time" id="currentTime">0:00</span>
        <div class="progress"><div class="progress-filled" id="progress"></div></div>
        <span class="time" id="duration">0:00</span>
      </div>
    </div>
    <div class="volume">
      <i class="fa-solid fa-volume-high"></i>
      <input type="range" min="0" max="1" step="0.01" id="volumeSlider" value="1">
    </div>
  </div>
</div>

<script>
// Data
const songs=[
  {title:"Blinding Lights",artist:"The Weeknd",cover:"c.jpg",src:"c1.mp3"},
  {title:"Shape of You",artist:"Ed Sheeran",cover:"https://i.scdn.co/image/ab67616d0000b27398ce9f9d6cba07f92f58c0c3",src:"https://p.scdn.co/mp3-preview/5.mp3"},
  {title:"Levitating",artist:"Dua Lipa",cover:"https://i.scdn.co/image/ab67616d0000b273fe52aca5f05d39b1c3e7f58f",src:"https://p.scdn.co/mp3-preview/7.mp3"},
  {title:"Stay",artist:"The Kid LAROI, Justin Bieber",cover:"https://i.scdn.co/image/ab67616d0000b273b16e36c5ed3a9f04fdf6f6b8",src:"https://p.scdn.co/mp3-preview/8.mp3"},
  {title:"Peaches",artist:"Justin Bieber",cover:"https://i.scdn.co/image/ab67616d0000b2738cf7fe63c19e78146ee3667f",src:"https://p.scdn.co/mp3-preview/9.mp3"},
  {title:"Bad Guy",artist:"Billie Eilish",cover:"https://i.scdn.co/image/ab67616d0000b2731c1b0f99d9db6466b7402493",src:"https://p.scdn.co/mp3-preview/10.mp3"},
  {title:"Save Your Tears",artist:"The Weeknd",cover:"https://i.scdn.co/image/ab67616d0000b27368c5b8a6e6e4e50e4a6a1c2d",src:"https://p.scdn.co/mp3-preview/11.mp3"}
];

let currentIndex=0;
let recentlyPlayed=[];
const audio=new Audio();
let isPlaying=false,isShuffle=false,isRepeat=false;

// DOM Elements
const songsDiv=document.getElementById("songs");
const searchResults=document.getElementById("searchResults");
const libraryContent=document.getElementById("libraryContent");
const nowTitle=document.getElementById("nowTitle");
const nowArtist=document.getElementById("nowArtist");
const nowCover=document.getElementById("nowCover");
const playBtn=document.getElementById("playBtn");
const progress=document.getElementById("progress");
const currentTimeEl=document.getElementById("currentTime");
const durationEl=document.getElementById("duration");
const volumeSlider=document.getElementById("volumeSlider");
const searchInput=document.getElementById("searchInput");
const recentlyDiv=document.getElementById("recentlyPlayed");
const recommendedDiv=document.getElementById("recommended");

// Render function
function renderSongs(container,data){
  container.innerHTML="";
  data.forEach((song,i)=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`<img src="${song.cover}"><div class="card-title">${song.title}</div><div class="card-artist">${song.artist}</div>`;
    card.onclick=()=>playSong(i);
    container.appendChild(card);
  });
}

// Play Song
function playSong(i){
  currentIndex=i;
  audio.src=songs[i].src;
  audio.play();
  isPlaying=true;
  updateNowPlaying();
  updatePlayButton();
  updateRecentlyPlayed(songs[i]);
  updateRecommended();
}

// Update Now Playing
function updateNowPlaying(){
  const song=songs[currentIndex];
  nowTitle.textContent=song.title;
  nowArtist.textContent=song.artist;
  nowCover.src=song.cover;
  nowCover.classList.add('playing');
}

// Play/Pause
function togglePlay(){if(!audio.src) playSong(0); else if(audio.paused){audio.play();isPlaying=true;}else{audio.pause();isPlaying=false;} updatePlayButton();}
function updatePlayButton(){playBtn.innerHTML=isPlaying?`<i class="fa-solid fa-pause"></i>`:`<i class="fa-solid fa-play"></i>`;}

// Next/Prev
function prevSong(){currentIndex=(currentIndex-1+songs.length)%songs.length;playSong(currentIndex);}
function nextSong(){if(isShuffle){currentIndex=Math.floor(Math.random()*songs.length);}else currentIndex=(currentIndex+1)%songs.length;playSong(currentIndex);}
function toggleShuffle(){isShuffle=!isShuffle;}
function toggleRepeat(){isRepeat=!isRepeat();}

// Progress & Volume
audio.addEventListener("timeupdate",()=>{
  if(audio.duration){
    const percent=(audio.currentTime/audio.duration)*100;
    progress.style.width=percent+"%";
    currentTimeEl.textContent=formatTime(audio.currentTime);
    durationEl.textContent=formatTime(audio.duration);
  }
});
function formatTime(sec){const m=Math.floor(sec/60);const s=Math.floor(sec%60);return m+":"+(s<10?"0"+s:s);}
function seek(e){const bar=e.currentTarget;const percent=e.offsetX/bar.offsetWidth;audio.currentTime=percent*audio.duration;}
audio.addEventListener("ended",()=>{if(isRepeat) playSong(currentIndex); else nextSong();});
volumeSlider.addEventListener("input",()=>{audio.volume=volumeSlider.value;});

// Tabs
const homeTab=document.getElementById("homeTab");
const searchTab=document.getElementById("searchTab");
const libraryTab=document.getElementById("libraryTab");
const homeSection=document.getElementById("homeSection");
const searchSection=document.getElementById("searchSection");
const librarySection=document.getElementById("librarySection");

homeTab.addEventListener("click",()=>showSection("home"));
searchTab.addEventListener("click",()=>showSection("search"));
libraryTab.addEventListener("click",()=>showSection("library"));

function showSection(section){
  homeSection.classList.add("hidden");
  searchSection.classList.add("hidden");
  librarySection.classList.add("hidden");
  homeTab.classList.remove("active");
  searchTab.classList.remove("active");
  libraryTab.classList.remove("active");
  if(section==="home"){homeSection.classList.remove("hidden");homeTab.classList.add("active");}
  if(section==="search"){searchSection.classList.remove("hidden");searchTab.classList.add("active");}
  if(section==="library"){librarySection.classList.remove("hidden");libraryTab.classList.add("active");renderSongs(libraryContent,songs);}
}

// Search
searchInput.addEventListener("input",()=>{
  const query=searchInput.value.toLowerCase();
  const filtered=songs.filter(s=>s.title.toLowerCase().includes(query)||s.artist.toLowerCase().includes(query));
  renderSongs(searchResults,filtered);
  showSection("search");
});

// Recently Played & Recommended
function updateRecentlyPlayed(song){
  recentlyPlayed=recentlyPlayed.filter(s=>s.title!==song.title);
  recentlyPlayed.unshift(song);
  if(recentlyPlayed.length>5) recentlyPlayed.pop();
  renderSongs(recentlyDiv,recentlyPlayed);
}
function updateRecommended(){
  const filtered=songs.filter(s=>!recentlyPlayed.includes(s));
  renderSongs(recommendedDiv,filtered.slice(0,5));
}

// Initial Render
renderSongs(songsDiv,songs);
updateRecommended();
</script>
</body>
</html>
