<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SpotiPro — Improved Spotify-like Player</title>
<meta name="description" content="Polished Spotify-like web player (single file: HTML + CSS + JS). Features: search, shuffle, repeat, progress, volume, responsive UI." />
<style>
  /* -------------------------
     SpotiPro — Single-file styles
     Clean, modern, responsive Spotify-like UI
     ------------------------- */

  :root{
    --bg:#071018;
    --panel:#0f1720;
    --muted:#98a1ab;
    --text:#e6eef6;
    --accent:#1db954;
    --accent-2:#26f07a;
    --glass: rgba(255,255,255,0.03);
    --radius:14px;
    --shadow: 0 12px 40px rgba(2,6,23,0.6);
    --track-gap:12px;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:var(--text);background:
    radial-gradient(900px 400px at 10% 0%, rgba(29,185,84,0.02), transparent), var(--bg);
    -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}

  a{color:inherit;text-decoration:none}
  input,button{font:inherit}

  /* App grid */
  .app{
    display:grid;
    grid-template-columns: 260px 1fr;
    grid-template-rows: 1fr auto; /* main + player */
    grid-template-areas: "sidebar main" "player player";
    gap:18px;
    height:100vh;
    padding:18px;
  }

  /* Sidebar */
  .sidebar{
    grid-area:sidebar;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    border-radius:var(--radius);
    padding:18px;
    border:1px solid rgba(255,255,255,0.03);
    box-shadow:var(--shadow);
    display:flex;
    flex-direction:column;
    gap:14px;
    min-height:0; overflow:auto;
  }

  .brand{display:flex;gap:12px;align-items:center}
  .brand .logo{width:44px;height:44px;border-radius:50%;display:grid;place-items:center;font-weight:800;color:#031; background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:0 8px 20px rgba(29,185,84,0.12)}
  .brand .title{font-weight:800;font-size:1.05rem}
  .brand .sub{color:var(--muted);font-size:.85rem}

  .nav{display:flex;flex-direction:column;gap:6px}
  .nav a{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;color:var(--muted);font-weight:600}
  .nav a:hover{background:var(--glass);color:var(--text)}

  .search-box{display:flex;gap:8px;align-items:center;padding:8px;border-radius:12px;background:var(--panel);border:1px solid rgba(255,255,255,0.02)}
  .search-box input{background:transparent;border:0;outline:0;color:var(--text);padding:6px;width:100%}

  .playlists{margin-top:6px;overflow:auto}
  .pl-item{padding:8px;border-radius:8px;color:var(--muted);font-size:.95rem;cursor:pointer}
  .pl-item:hover{background:rgba(255,255,255,0.02);color:var(--text)}

  /* Main content */
  .main{
    grid-area:main; overflow:auto; padding:8px; min-height:0; display:flex;flex-direction:column;gap:18px;
  }
  .topbar{display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.02)}
  .topbar .left{display:flex;align-items:center;gap:12px}
  .topbar .greeting{font-weight:800}
  .topbar .muted{color:var(--muted)}

  /* Grid for cards */
  .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:var(--track-gap);}

  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.02);display:flex;flex-direction:column;gap:10px;min-height:150px;
    transition:transform .18s, box-shadow .18s;
  }
  .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(0,0,0,0.6)}
  .card .art{height:110px;border-radius:10px;background:linear-gradient(180deg,#222,#0c0c0c);display:flex;align-items:end;padding:10px;color:#fff;font-weight:700}
  .card .title{font-weight:800}
  .card .sub{color:var(--muted);font-size:.95rem}

  /* Tracks list */
  .tracks{
    display:flex;flex-direction:column;gap:8px;
    padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.02)
  }

  .track-row{
    display:grid;grid-template-columns:40px 1fr 140px 80px;gap:12px;align-items:center;padding:10px;border-radius:8px;cursor:pointer;
    transition: background .12s;
  }
  .track-row:hover{background:rgba(255,255,255,0.012)}
  .track-thumb{width:40px;height:40px;border-radius:8px;overflow:hidden;background:#111}
  .track-title{font-weight:700}
  .track-artist{color:var(--muted);font-size:.95rem}
  .track-album{color:var(--muted);text-align:right}
  .track-duration{text-align:right;color:var(--muted)}

  /* Player (sticky bottom) */
  .player{
    grid-area:player; border-radius:12px;padding:12px 18px;background:linear-gradient(180deg, rgba(0,0,0,0.5), rgba(0,0,0,0.7));border:1px solid rgba(255,255,255,0.03);
    display:flex;align-items:center;justify-content:space-between;gap:12px;box-shadow:0 -8px 30px rgba(0,0,0,0.6)
  }
  .player-left{display:flex;gap:12px;align-items:center;min-width:200px}
  .player-art{width:64px;height:64px;border-radius:8px;background:#111;flex:0 0 64px}
  .player-meta{display:flex;flex-direction:column}
  .player-meta .song{font-weight:800}
  .player-meta .artist{color:var(--muted);font-size:.95rem}

  .player-center{flex:1;display:flex;flex-direction:column;align-items:center;gap:10px}
  .controls{display:flex;align-items:center;gap:12px}
  .btn{background:transparent;border:0;color:var(--text);cursor:pointer;font-size:18px;padding:8px;border-radius:8px}
  .btn:focus{outline:3px solid rgba(29,185,84,0.14);outline-offset:3px}
  .btn.play{width:46px;height:46px;border-radius:50%;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021;font-weight:800;font-size:18px;display:grid;place-items:center}
  .btn.tiny{font-size:16px;padding:6px}

  .progress-wrap{width:100%;max-width:820px;display:flex;gap:12px;align-items:center}
  .time{color:var(--muted);font-size:.9rem;min-width:42px;text-align:center}
  .progress{flex:1;height:8px;background:rgba(255,255,255,0.03);border-radius:99px;overflow:hidden;cursor:pointer}
  .progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-2));}

  .player-right{display:flex;align-items:center;gap:12px;min-width:220px;justify-content:flex-end}
  .devices{display:flex;align-items:center;gap:8px;color:var(--muted)}

  /* Search input (large) */
  .search-input{width:360px;padding:8px 12px;border-radius:999px;background:var(--panel);border:1px solid rgba(255,255,255,0.02);color:var(--text)}
  .search-input::placeholder{color:rgba(255,255,255,0.4)}

  /* Responsive */
  @media (max-width:1000px){
    .app{grid-template-columns:1fr;grid-template-areas:"main" "player";padding:12px}
    .sidebar{display:none}
    .search-input{width:100%}
    .track-row{grid-template-columns:40px 1fr 100px 60px}
    .player-left{min-width:120px}
    .player-right{min-width:100px}
  }

  /* small visual helpers */
  .muted{color:var(--muted)}
  .flex{display:flex;align-items:center;gap:8px}
  .small{font-size:.9rem}
</style>
</head>
<body>

<div class="app" role="application" aria-label="SpotiPro music player">

  <!-- SIDEBAR -->
  <aside class="sidebar" aria-label="Navigation">
    <div class="brand" role="banner">
      <div class="logo">S</div>
      <div>
        <div class="title">SpotiPro</div>
        <div class="sub small">Your personal player</div>
      </div>
    </div>

    <nav class="nav" aria-label="Primary">
      <a href="#" class="active">Home</a>
      <a href="#">Search</a>
      <a href="#">Your Library</a>
    </nav>

    <div class="search-box" role="search" aria-label="Search tracks">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden style="opacity:.8"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      <input id="sidebarSearch" type="search" placeholder="Search library..." aria-label="Search library">
    </div>

    <div style="font-weight:700;margin-top:6px">Playlists</div>
    <div class="playlists" id="playlistList" aria-label="Playlists">
      <div class="pl-item">Liked Songs</div>
      <div class="pl-item">Tamil Top Hits</div>
      <div class="pl-item">Chill Vibes</div>
      <div class="pl-item">Workout Mix</div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main" role="main">
    <div class="topbar" role="region" aria-label="Top controls">
      <div class="left">
        <div class="greeting">Good evening</div>
        <div class="muted small">—  Curated playlists & quick access</div>
      </div>
      <div class="flex">
        <input id="mainSearch" class="search-input" placeholder="Search tracks, artists, albums" aria-label="Search tracks">
        <button id="upgradeBtn" class="btn tiny">Upgrade</button>
        <div style="display:flex;align-items:center;gap:8px;padding:6px;border-radius:999px;background:var(--panel);border:1px solid rgba(255,255,255,0.02)">
          <div style="width:34px;height:34px;border-radius:50%;background:#223;display:grid;place-items:center">U</div>
          <div style="font-weight:700">User</div>
        </div>
      </div>
    </div>

    <!-- CARDS ROW -->
    <section class="cards" aria-label="Featured">
      <article class="card" aria-hidden>
        <div class="art" style="background: linear-gradient(135deg,#7b61ff,#2db6ff)">Daily Mix</div>
        <div class="title">Daily Mix 1</div>
        <div class="sub">50 songs — Various artists</div>
      </article>

      <article class="card" aria-hidden>
        <div class="art" style="background: linear-gradient(135deg,#ff6a88,#ffb199)">Top Tamil</div>
        <div class="title">Tamil Top 50</div>
        <div class="sub">Trending now</div>
      </article>

      <article class="card" aria-hidden>
        <div class="art" style="background: linear-gradient(135deg,#66a6ff,#8fd3f4)">Chill Vibes</div>
        <div class="title">Chill Vibes</div>
        <div class="sub">Lo-fi and relaxed</div>
      </article>

      <article class="card" aria-hidden>
        <div class="art" style="background: linear-gradient(135deg,#ffd36a,#ff8a7e)">New Releases</div>
        <div class="title">New Releases</div>
        <div class="sub">Fresh this week</div>
      </article>
    </section>

    <!-- TRACK LIST -->
    <section class="tracks" id="tracksList" aria-label="Tracks list" role="list">
      <!-- JS will populate the rows here -->
    </section>
  </main>

  <!-- PLAYER -->
  <footer class="player" role="contentinfo" aria-label="Now playing">
    <div class="player-left">
      <div class="player-art" id="playerArt" aria-hidden></div>
      <div class="player-meta">
        <div class="song" id="playerSong">—</div>
        <div class="artist" id="playerArtist">—</div>
      </div>
    </div>

    <div class="player-center">
      <div class="controls" role="group" aria-label="Playback controls">
        <button id="shuffleBtn" class="btn" title="Shuffle">🔀</button>
        <button id="prevBtn" class="btn" title="Previous">⏮</button>
        <button id="playBtn" class="btn play" title="Play / Pause">▶</button>
        <button id="nextBtn" class="btn" title="Next">⏭</button>
        <button id="repeatBtn" class="btn" title="Repeat">🔁</button>
      </div>

      <div class="progress-wrap">
        <div class="time small muted" id="curTime">0:00</div>
        <div class="progress" id="progressBar" title="Seek">
          <i id="progressFill"></i>
        </div>
        <div class="time small muted" id="durTime">0:00</div>
      </div>
    </div>

    <div class="player-right">
      <div class="devices muted">Devices</div>
      <div style="width:140px;display:flex;align-items:center;gap:8px">
        <button id="muteBtn" class="btn" title="Mute">🔊</button>
        <input id="volSlider" type="range" min="0" max="1" step="0.01" value="1" aria-label="Volume slider">
      </div>
    </div>
  </footer>

</div>

<!-- Hidden audio element (core playback) -->
<audio id="audio" preload="auto"></audio>

<script>
/* =========================
   SpotiPro — player logic
   - Tracks array is here; replace src with your audio files/URLs.
   - Features: play/pause, prev/next, auto-next, shuffle, repeat (off/all/one), progress, seek, volume, search/filter.
   ========================= */

const tracks = [
  // Example entries — replace `src` with your MP3 file paths or remote URLs
  { id:1, title:"Vaathi Coming", artist:"Anirudh Ravichander", album:"Single", duration:"3:22", cover:"https://i.scdn.co/image/ab67616d0000b273ff9a1cd5a2a7e2f8f5b2f5af", src:"songs/vaathi.mp3" },
  { id:2, title:"Thalli Pogathey", artist:"Sid Sriram", album:"Album", duration:"4:05", cover:"https://i.scdn.co/image/ab67616d0000b273de6f2f7c46df5d3e3a5f1b44", src:"songs/thalli.mp3" },
  { id:3, title:"Rowdy Baby", artist:"Dhanush, Dhee", album:"Single", duration:"4:02", cover:"https://i.scdn.co/image/ab67616d0000b2738c8c9d0a42937e2e3a4ef5ad", src:"songs/rowdy.mp3" },
  { id:4, title:"Why This Kolaveri Di", artist:"Dhanush", album:"Album", duration:"3:21", cover:"https://i.scdn.co/image/ab67616d0000b2739c9b1f5a4b6e7c8d9e0f1a2b", src:"songs/kolaveri.mp3" },
  { id:5, title:"Enna Solla Pogirai", artist:"Shankar Mahadevan", album:"Album", duration:"4:10", cover:"https://i.scdn.co/image/ab67616d0000b2735b4c6a7b8c9d0e1f2a3b4c5d", src:"songs/ennasolla.mp3" }
];

// DOM references
const audio = document.getElementById('audio');
const tracksList = document.getElementById('tracksList');
const playBtn = document.getElementById('playBtn');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const shuffleBtn = document.getElementById('shuffleBtn');
const repeatBtn = document.getElementById('repeatBtn');
const progressBar = document.getElementById('progressBar');
const progressFill = document.getElementById('progressFill');
const curTimeEl = document.getElementById('curTime');
const durTimeEl = document.getElementById('durTime');
const playerArt = document.getElementById('playerArt');
const playerSong = document.getElementById('playerSong');
const playerArtist = document.getElementById('playerArtist');
const volSlider = document.getElementById('volSlider');
const muteBtn = document.getElementById('muteBtn');
const mainSearch = document.getElementById('mainSearch');
const sidebarSearch = document.getElementById('sidebarSearch');

let currentIndex = 0;
let isPlaying = false;
let isShuffle = false;
let repeatMode = 'off'; // off | all | one
let lastVolume = 1;
let filteredIndices = tracks.map((_,i)=>i); // indices into tracks

/* ---------- UTILITIES ---------- */
function formatTime(secs){
  if (!secs || isNaN(secs)) return '0:00';
  const s = Math.floor(secs % 60).toString().padStart(2,'0');
  const m = Math.floor(secs / 60);
  return `${m}:${s}`;
}

/* ---------- RENDER TRACK LIST ---------- */
function renderTracks(filterText = ''){
  tracksList.innerHTML = '';
  const query = filterText.trim().toLowerCase();
  filteredIndices = [];
  tracks.forEach((t, idx) => {
    const hay = (t.title + ' ' + t.artist + ' ' + t.album).toLowerCase();
    if (query && !hay.includes(query)) return;
    filteredIndices.push(idx);

    const row = document.createElement('div');
    row.className = 'track-row';
    row.tabIndex = 0;
    row.dataset.index = idx;
    row.innerHTML = `
      <div class="track-thumb"><img src="${t.cover}" alt="${t.title}" style="width:100%;height:100%;object-fit:cover"></div>
      <div>
        <div class="track-title">${t.title}</div>
        <div class="track-artist">${t.artist}</div>
      </div>
      <div class="track-album">${t.album}</div>
      <div class="track-duration">${t.duration}</div>
    `;
    // click & keyboard activation
    row.addEventListener('click', () => selectAndPlay(idx));
    row.addEventListener('keydown', (e) => { if (e.key === 'Enter') selectAndPlay(idx); });
    tracksList.appendChild(row);
  });

  // If current track not in filteredIndices, update currentIndex to first visible
  if (!filteredIndices.includes(currentIndex)) {
    if (filteredIndices.length) {
      currentIndex = filteredIndices[0];
      loadTrack(currentIndex, false);
    } else {
      // no match
      audio.pause(); isPlaying = false; playBtn.textContent = '▶';
      playerSong.textContent = '—'; playerArtist.textContent = '—'; playerArt.style.backgroundImage = '';
    }
  }
}

/* ---------- LOAD / PLAY / PAUSE ---------- */
function loadTrack(index, autoplay=true){
  const t = tracks[index];
  if (!t) return;
  audio.src = t.src;
  playerArt.style.backgroundImage = `url('${t.cover}')`;
  playerArt.style.backgroundSize = 'cover';
  playerSong.textContent = t.title;
  playerArtist.textContent = t.artist;
  // set duration after metadata loads
  audio.onloadedmetadata = () => {
    durTimeEl.textContent = formatTime(audio.duration);
    if (autoplay) playTrack();
  };
}

function playTrack(){
  audio.play().then(()=> {
    isPlaying = true;
    playBtn.textContent = '⏸';
  }).catch(err=>{
    // autoplay might be blocked; still set UI
    isPlaying = false;
    playBtn.textContent = '▶';
    console.warn('Playback failed:', err);
  });
}

function pauseTrack(){
  audio.pause();
  isPlaying = false;
  playBtn.textContent = '▶';
}

function selectAndPlay(index){
  currentIndex = index;
  loadTrack(index,true);
}

/* ---------- NAVIGATION (prev/next/shuffle/repeat) ---------- */
function playNext(){
  if (repeatMode === 'one'){
    loadTrack(currentIndex,true);
    return;
  }
  if (isShuffle){
    // random from filteredIndices if search active else all
    const pool = filteredIndices.length ? filteredIndices : tracks.map((_,i)=>i);
    currentIndex = pool[Math.floor(Math.random()*pool.length)];
    loadTrack(currentIndex,true);
    return;
  }
  // normal next
  const pool = filteredIndices.length ? filteredIndices : tracks.map((_,i)=>i);
  const pos = pool.indexOf(currentIndex);
  let nextPos = pos + 1;
  if (nextPos >= pool.length) {
    if (repeatMode === 'all') nextPos = 0;
    else { pauseTrack(); return; }
  }
  currentIndex = pool[nextPos];
  loadTrack(currentIndex,true);
}

function playPrev(){
  if (audio.currentTime > 3) { audio.currentTime = 0; return; }
  const pool = filteredIndices.length ? filteredIndices : tracks.map((_,i)=>i);
  const pos = pool.indexOf(currentIndex);
  let prevPos = pos - 1;
  if (prevPos < 0) prevPos = (repeatMode==='all') ? pool.length-1 : 0;
  currentIndex = pool[prevPos];
  loadTrack(currentIndex,true);
}

/* ---------- PROGRESS & SEEK ---------- */
audio.addEventListener('timeupdate', ()=>{
  if (!audio.duration) return;
  const pct = (audio.currentTime / audio.duration) * 100;
  progressFill.style.width = pct + '%';
  curTimeEl.textContent = formatTime(audio.currentTime);
});
progressBar.addEventListener('click', (e)=>{
  const rect = progressBar.getBoundingClientRect();
  const pct = (e.clientX - rect.left)/rect.width;
  if (audio.duration) audio.currentTime = pct * audio.duration;
});

/* ---------- TRACK END HANDLING ---------- */
audio.addEventListener('ended', ()=> {
  playNext();
});

/* ---------- VOLUME & MUTE ---------- */
volSlider.addEventListener('input', ()=> {
  audio.volume = parseFloat(volSlider.value);
  if (audio.volume === 0) muteBtn.textContent = '🔇';
  else muteBtn.textContent = '🔊';
});
muteBtn.addEventListener('click', ()=>{
  if (audio.volume === 0){
    audio.volume = lastVolume || 1;
    volSlider.value = audio.volume;
    muteBtn.textContent = '🔊';
  } else {
    lastVolume = audio.volume;
    audio.volume = 0;
    volSlider.value = 0;
    muteBtn.textContent = '🔇';
  }
});

/* ---------- BUTTON / KEY HANDLERS ---------- */
playBtn.addEventListener('click', ()=> {
  if (isPlaying) pauseTrack(); else playTrack();
});
nextBtn.addEventListener('click', playNext);
prevBtn.addEventListener('click', playPrev);

shuffleBtn.addEventListener('click', ()=>{
  isShuffle = !isShuffle;
  shuffleBtn.style.color = isShuffle ? 'var(--accent)' : 'var(--text)';
});

repeatBtn.addEventListener('click', ()=>{
  if (repeatMode === 'off') { repeatMode = 'all'; repeatBtn.textContent = '🔁'; repeatBtn.style.color = 'var(--accent)'; }
  else if (repeatMode === 'all') { repeatMode = 'one'; repeatBtn.textContent = '🔂'; repeatBtn.style.color = 'var(--accent)'; }
  else { repeatMode = 'off'; repeatBtn.textContent = '🔁'; repeatBtn.style.color = 'var(--text)'; }
});

// keyboard: space to play/pause, right/left for seek small steps
document.addEventListener('keydown', (e)=>{
  if (e.code === 'Space') { e.preventDefault(); if (isPlaying) pauseTrack(); else playTrack(); }
  if (e.code === 'ArrowRight') audio.currentTime = Math.min(audio.duration || 0, (audio.currentTime || 0) + 5);
  if (e.code === 'ArrowLeft') audio.currentTime = Math.max(0, (audio.currentTime || 0) - 5);
});

/* ---------- SEARCH / FILTER ---------- */
function applySearch(q){
  renderTracks(q);
}
mainSearch.addEventListener('input', (e)=> applySearch(e.target.value));
sidebarSearch.addEventListener('input', (e)=> applySearch(e.target.value));

/* ---------- INIT ---------- */
(function init(){
  // initial DOM render of track rows
  renderTracks('');
  // load first
  if (tracks.length) loadTrack(0,false);
  // set initial volume
  audio.volume = parseFloat(volSlider.value) || 1;
  // set durations (if mp3 not loaded yet we show provided durations from array)
  durTimeEl.textContent = tracks[0] ? tracks[0].duration : '0:00';
  curTimeEl.textContent = '0:00';
})();
</script>

</body>
</html>
